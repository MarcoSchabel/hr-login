<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <title>HR Login</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{--bg:#0c1222;--card:#141c33;--text:#eaf0ff;--muted:#9fb0d0;--accent:#66a3ff}
    *{box-sizing:border-box} body{margin:0;background:linear-gradient(160deg,#0c1222,#0e1730);color:var(--text);font-family:system-ui}
    .wrap{min-height:100vh;display:grid;place-items:center;padding:24px}
    .card{width:min(560px,94vw);background:var(--card);border-radius:16px;padding:24px;box-shadow:0 14px 40px rgba(0,0,0,.35)}
    h1{margin:0 0 16px;font-size:22px} 
    label{display:block;margin:10px 0 6px;color:#cdd9f5;font-size:13px}
    input{width:100%;padding:12px 14px;border-radius:10px;border:1px solid #2a3558;background:#0c1430;color:var(--text)}
    .row{display:flex;gap:10px;margin-top:12px;flex-wrap:wrap}
    button{flex:1;min-width:140px;padding:12px;border:0;border-radius:10px;background:var(--accent);color:#051029;font-weight:600;cursor:pointer}
    button.secondary{background:#26345c;color:#eaf0ff}
    .err{margin-top:10px;color:#ff9aa8;min-height:18px}
    pre{background:#0c1430;border:1px solid #22305a;border-radius:10px;padding:12px;overflow:auto;max-height:260px}
  </style>
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>HR Login</h1>

      <label for="email">E-Mail</label>
      <input id="email" type="email" autocomplete="username" placeholder="du@firma.de" required />

      <label for="pw">Passwort</label>
      <input id="pw" type="password" autocomplete="current-password" placeholder="••••••••" required />

      <div class="row">
        <button id="btnSignIn">Einloggen</button>
        <button id="btnSignOut" class="secondary">Logout</button>
      </div>

      <div class="err" id="error"></div>

      <h2 style="margin:18px 0 8px;font-size:16px">Session</h2>
      <pre id="sessionBox">{ }</pre>
    </div>
  </div>

<script>
  // ⬇️ Diese zwei Werte einsetzen
  const SUPABASE_URL      = "https://rrzenypyvagcopfaplas.supabase.co";
  const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJyemVueXB5dmFnY29wZmFwbGFzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM0MDU1NjcsImV4cCI6MjA1ODk4MTU2N30.Ja7n70vI2YrEXQueM0C2FX7QydeCdLkEaO2gGyl_lUo";

  const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
  const el = (id) => document.getElementById(id);
  const setError = (m) => el('error').textContent = m || "";

  async function refreshSessionBox() {
    const { data: { session }, error } = await supabase.auth.getSession();
    if (error) setError(error.message);
    el('sessionBox').textContent = JSON.stringify(session, null, 2) || "{ }";
  }

  el('btnSignIn').addEventListener('click', async () => {
    setError("");
    const email = el('email').value.trim();
    const password = el('pw').value;
    const { data, error } = await supabase.auth.signInWithPassword({ email, password });
    if (error) return setError(error.message);
    await refreshSessionBox();
  });

  el('btnSignOut').addEventListener('click', async () => {
    setError("");
    const { error } = await supabase.auth.signOut();
    if (error) return setError(error.message);
    await refreshSessionBox();
  });

  // Beim Laden den aktuellen Session-Status anzeigen
  refreshSessionBox();
</script>
</body>
</html>
